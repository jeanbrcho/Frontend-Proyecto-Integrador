<div class="chat-window" [class.open]="isOpen()">

  <!-- Header -->
  <div class="chat-header">
    <div class="header-content">
      <span class="logo">ğŸ¾</span>
      <h3>Guau que corte</h3>
    </div>
    <button (click)="toggleChat()" class="close-btn" aria-label="Cerrar chat">âœ•</button>
  </div>

  <!-- Mensajes -->
  <div class="chat-messages" #messagesContainer>
    @for (msg of messages(); track $index) {
      <div class="message" [class.user]="msg.isUser" [class.bot]="!msg.isUser">
        <div class="message-content">
          <p>{{ msg.text }}</p>
          <span class="timestamp">{{ msg.timestamp | date:'HH:mm' }}</span>
        </div>
      </div>
    }

    @if (isLoading()) {
      <div class="message bot">
        <div class="message-content">
          <div class="typing-indicator"><span></span><span></span><span></span></div>
        </div>
      </div>
    }
  </div>

  <!-- Input -->
  <div class="chat-input">
    <input type="text" [(ngModel)]="newMessage" (keypress)="onKeyPress($event)" placeholder="Escribe tu mensaje..." [disabled]="isLoading()" aria-label="Mensaje">
    <button (click)="sendMessage()" [disabled]="!newMessage().trim() || isLoading()" aria-label="Enviar mensaje">ğŸ“¤</button>
  </div>

</div>
